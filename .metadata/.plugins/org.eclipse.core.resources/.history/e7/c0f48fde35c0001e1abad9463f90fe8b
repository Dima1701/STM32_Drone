/*
 * ESC.c
 *
 *  Created on: Jan 31, 2024
 *      Author: dimak
 */
void my_main(void) {

}

void esc_calibrate(void) {
	if (Calibrate) {
		TIM2->CCR1 = 100;
		HAL_Delay(2000);
		TIM2->CCR1 = 50;
		HAL_Delay(1000);
		TIM2->CCR1 = 0;
		HAL_Delay(3000);
	}
}
int map(long x, int in_min, int in_max, int out_min, int out_max)
{
  return (x - in_min) * (out_max - out_min + 1) / (in_max - in_min + 1) + out_min;
}

void HAL_ADC_ConvCpltCallback(ADC_HandleTypeDef* hadc)
{
	ADC_Converted = map(ADC_Data, 0, 4095, 50, 100);

	TIM1->CCR1 = ADC_Converted;
}
